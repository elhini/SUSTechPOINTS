<!DOCTYPE html>
<html lang="en">
	<head>
		<title>PCD Annotator</title>
		<meta charset="utf-8">
		<link rel="icon" type="image/png" href="/static/icon2.png">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<!-- <script src="/static/js/lib/jquery-1.12.4.js"></script>
		<link rel="stylesheet" href="/static/js/lib/jquery-ui-1.12.1/jquery-ui.min.css">
		<script src="/static/js/lib/jquery-ui-1.12.1/jquery-ui.min.js"></script> -->

		<link type="text/css" rel="stylesheet" href="/static/css/main.css">

	</head>

	<body>
		
		<div id="main-editor"></div>
		<!-- div id="batch-editor"-->
		</div>
		<template id="editor-template"><div id="main-ui" class="editor-ui">
				<div id="container"  tabindex="-1">			
					<div id='select-box' ></div>
					<svg width="100%" height="100%" id = "main-view-svg">
						<g id="grid-lines-wrapper"></g>
					</svg>
				</div>
				
				<div id="config-button" class="ui-button">
					<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-button">
						<g>
							<circle cx = 12 cy=7 r=1 />
							<circle cx = 12 cy=12 r=1 />
							<circle cx = 12 cy=17 r=1 />							
						</g>
					</svg>
				</div>

				
				

				<div id="global-info">
					<!-- text id="frame"></text-->
					<div id="selectors">
						<select id="scene-selector">
							<option>--scene--</option>
						</select>
						<select id="frame-selector">
								<option>--frame--</option>
						</select>
						<select id="object-selector">
								<option>--object--</option>
						</select>
						
						<select id="camera-selector">
								<option>--camera--</option>
						</select>
					</div>

					<div id="changed-mark" class="header-button">
						<div id='save-button'>
							<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-button"><g>
								<path d="M 4 4 L 18 4 L 20 6 L 20 20 L 4 20 Z M 8 4 h 8 v 2 h -8 z M 6 10 h 12 V 18 h -12 z "></path>
							</g></svg>
						</div>
						<div id="changed-world-list-wrapper">
							<div> All modified frames, click to save them all</div>
							<div id='changed-world-list'></div>
						</div>
					</div>
					
					<text id="box"></text>			
					<text id="ref-obj"></text>
				</div>
				
				<!-- div id="image"></div -->
				<div id="floating-things">
				<div id="floating-labels" class="non-selectable"></div>				
				<div id="obj-editor">
					<div id="category-id-editor">
						<select title="category"  id="object-category-selector"></select>
						<input title="tracking id" list="obj-ids-of-scene" id="object-track-id-editor" type="text" size="5"></input>						
						<div id="label-gen-id" class="ui-button" title="genearte ID">
							<!-- <span class="ui-icon ui-icon-copy"></span> -->
							<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-button"><g>
								<!-- <rect x="4" y="4" width="12" height="12"/> -->
								<rect x="6" y="6" width="12" height="12"/>								
							</g></svg>
						</div>
					</div>
					<div id="obj-editor-tools">
						<div id="label-copy" class="ui-button" title="copy (C-c)">
							<!-- <span class="ui-icon ui-icon-copy"></span> -->
							<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-button"><g>
								<!-- <rect x="4" y="4" width="12" height="12"/> -->
								<rect x="8" y="8" width="12" height="12"/>
								<polyline points="8 16 4 16 4 4 16 4 16 8 "/>
							</g></svg>
						</div>
						<div id="label-paste" class="ui-button"  title="auto adjust">
							<!-- <span class="ui-icon ui-icon-key"></span></div> -->
							<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-button"><g>
								<!-- <rect x="4" y="8" width="16" height="12"/>
								<circle cx="12" cy="8" r = "4"/>								 -->
								<circle cx=12 cy=12 r=4 />
								<rect x=10 y=16 width=4 height=4 />
								<polyline points='12 3 12 6' />
								<polyline points='3 12 6 12' />
								<polyline points='18 12 21 12' />
								<polyline points='5 5 8 8' />
								<polyline points='18 5 15 8' />
							</g></svg>
						</div>
						<div id="label-batchedit" class="ui-button"  title="edit multiple instances">
							<!-- <span class="ui-icon ui-icon-zoomin"></span> -->
							<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-button"><g>
								<rect x="4" y="4" width="8" height="8"/>
								<rect x="4" y="12" width="8" height="8"/>
								<rect x="12" y="4" width="8" height="8"/>
								
							</g></svg>
						</div>

						<div id="label-trajectory" class="ui-button"  title="trojectory">
							<!-- <span class="ui-icon ui-icon-zoomin"></span> -->
							<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-button"><g>
								<path d="M 4 4 C 20 4, 4 20, 20 20" />
								
							</g></svg>
						</div>

						<div id="label-highlight" class="ui-button"  title="focus">
							<!-- <span class="ui-icon ui-icon-zoomin"></span> -->
							<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-button"><g>
								<circle cx="10" cy="10" r="7"/>
								<polyline points="15 15 20 20"/>
								<polyline points="10 6 10 14"/>
								<polyline points="6 10 14 10"/>
							</g></svg>
						</div>
						<div id="label-edit" class="ui-button"  title="edit">
							<!-- <span class="ui-icon ui-icon-pencil"></span> -->
							<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-button"><g>
								<polyline points="12 4 12 20" />
								<polyline points="4 9 12 9" />
								<polyline points="8 5 12 9 8 13" />
								<polyline points="20 15 12 15" />
								<!-- <polyline points="16 19 12 15  16 11" /> -->
							</svg>
						</div>
						<div id="label-rotate" class="ui-button"  title="reverse direction (g)">
							<!-- <span class="ui-icon ui-icon-transferthick-e-w"></span></div> -->
							<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-button"><g>
								<!-- <rect x=6 y=4 width=12 height=8 />
								<polyline points="12 12 12 20" />
								<polyline points="8 16 12 20 16 16" /> -->
								<rect x=8 y=8 width=8 height=8 />

								<polyline points="12 12 12 21" />
								<polyline points="10 19 12 21 14 19" />
								
								<polyline points="12 12 12 3"  stroke-dasharray="1" />
								<polyline points="10 5 12 3 14 5" stroke-dasharray="1" />
							</g></svg>
						</div>
						<div id="label-reset" class="ui-button"  title="reset">
							<!-- <span class="ui-icon ui-icon-refresh"></span></div>				 -->
							<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-button"><g>
								<circle  cx=12 cy=12 r=8 />
								<circle  cx=12 cy=12 r=1 />
							</g></svg>
							</div>
						<div id="label-del" class="ui-button"  title="delete (Del)">
							<!-- <span class="ui-icon ui-icon-trash"></span> -->
							<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-button"><g>
								<path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V8H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"></path>
							</g></svg>
						</div>
					</div>
				</div>
				</div>

				<div id="maincanvas-wrapper">
					<canvas id="maincanvas" width="2048" height="1536"></canvas>
					<svg id = "maincanvas-svg" viewbox="0 0 2048 1536" preserveAspectRatio="none">
						<image id="svg-image" x="0" y="0"  width="2048" height="1536"  preserveAspectRatio="none"
						xlink:href=""
						/>
						<g id="svg-boxes"></g>
						<g id="svg-points"></g>
					</svg>
				</div>
				
				<div id="main-box-editor-wrapper"></div>
				<div id="batch-box-editor-wrapper"></div>
				<div id="context-menu-wrapper" class="non-selectable">
					<div id="context-menu">
						<div class="menu-item menu-seperator"></div>

						<div class="menu-item" id="cm-new">
							<div class="menu-item-icon"></div>
							<div class="menu-item-text">New</div>							
							<div class="menu-item-arrow menu-item-icon">
								<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-menu-icon"><g>
									<path d="M12 8 L 18 12 L 12 16Z"></path>
								</g></svg>
							</div>
							<div id="new-submenu">
							</div>
						</div>

						<div class="menu-item" id="cm-paste">
							<div class="menu-item-icon"></div>
							<div class="menu-item-text">Paste/Auto Adjust</div>
						</div>

						<div class="menu-item menu-seperator"></div>

						<div class="menu-item" id="cm-goto">
							<div class="menu-item-icon"></div>
							<div class="menu-item-text">Go to</div>
							<div class="menu-item-arrow menu-item-icon">
								<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-menu-icon"><g>
									<path d="M12 8 L 18 12 L 12 16Z"></path>
								</g></svg>
							</div>
							<div id="goto-submenu">
								<div class="menu-item" id="cm-prev-frame">
									<div class="menu-item-icon"></div>
									<div class="menu-item-text">Previous frame (3)</div>
								</div>
							
								<div class="menu-item" id="cm-next-frame">
									<div class="menu-item-icon"></div>
									<div class="menu-item-text">Next frame (4)</div>
								</div>
		
								<div class="menu-item" id="cm-first-frame">
									<div class="menu-item-icon"></div>
									<div class="menu-item-text">First frame</div>
								</div>
								<div class="menu-item" id="cm-last-frame">
									<div class="menu-item-icon"></div>
									<div class="menu-item-text">Last frame</div>
								</div>


								<div class="menu-item menu-seperator"></div>
								<div class="menu-item" id="cm-prev-object">
									<div class="menu-item-icon"></div>
									<div class="menu-item-text">Previous object (1)</div>
								</div>
							
								<div class="menu-item" id="cm-next-object">
									<div class="menu-item-icon"></div>
									<div class="menu-item-text">Next object (2)</div>
								</div>


								<div class="menu-item menu-seperator"></div>
								<div class="menu-item" id="cm-go-to-10hz">
									<div class="menu-item-icon"></div>
									<div class="menu-item-text">10hz scene</div>
								</div>
		
								<div class="menu-item" id="cm-go-to-2hz">
									<div class="menu-item-icon"></div>
									<div class="menu-item-text">2Hz scene</div>
								</div>
							</div>
						</div>
						
						<div class="menu-item" id="cm-play">
							<div class="menu-item-icon"></div>
							<div class="menu-item-text">Play</div>
							<div class="menu-item-arrow menu-item-icon">
								<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-menu-icon"><g>
									<path d="M12 8 L 18 12 L 12 16Z"></path>
								</g></svg>
							</div>
							<div id="play-submenu">
								<div class="menu-item" id="cm-play-2fps">
									<div class="menu-item-text">2 FPS</div></div>
								<div class="menu-item" id="cm-play-10fps">
									<div class="menu-item-text">10 FPS</div></div>
								<div class="menu-item" id="cm-play-20fps">
									<div class="menu-item-text">20 FPS</div></div>
								<div class="menu-item" id="cm-play-50fps">
									<div class="menu-item-text">50 FPS</div></div>
							</div>
						</div>
					
						<div class="menu-item" id="cm-pause">
							<div class="menu-item-icon"></div>
							<div class="menu-item-text">Pause/Resume (Space)</div>				
						</div>

						<div class="menu-item" id="cm-stop">
							<div class="menu-item-icon"></div>
							<div class="menu-item-text">Stop</div>				
						</div>

						<div class="menu-item menu-seperator"></div>

						
						<div class="menu-item" id="cm-save">
							<div class="menu-item-icon"></div>
							<div class="menu-item-text">Save (C-s)</div>				
						</div>
						
						<div class="menu-item" id="cm-save-all">
							<div class="menu-item-icon"></div>
							<div class="menu-item-text">Save All</div>
							<div id="saveall-submenu"></div>		
						</div>

						<div class="menu-item" id="cm-reload">
							<div class="menu-item-icon"></div>
							<div class="menu-item-text">Reload (C-r)</div>				
						</div>

						<div class="menu-item" id="cm-reload-all">
							<div class="menu-item-icon"></div>
							<div class="menu-item-text">Reload All</div>				
						</div>

						<div class="menu-item menu-seperator"></div>
						<div class="menu-item" id="cm-show-frame-info">
							<div class="menu-item-icon"></div>
							<div class="menu-item-text">Frame info</div>				
						</div>

						<div class="menu-item" id="cm-crop-scene">
							<div class="menu-item-icon"></div>
							<div class="menu-item-text">Crop scene</div>				
						</div>

						<div class="menu-item menu-seperator"></div>
						<div class="menu-item" id="cm-show-stat">
							<div class="menu-item-icon"></div>
							<div class="menu-item-text">Stat</div>				
						</div>

					</div>
				
					<div id="object-context-menu">
						<div class="menu-item" id="cm-delete">
							<div class="menu-item-icon">							
							</div>
							<div class="menu-item-text">Delete</div>
						</div>

						<div class="menu-item" id="cm-delete-obj">
							<div class="menu-item-icon"></div>
							<div class="menu-item-text">Delete (all) in other frames</div>
						</div>
						<div class="menu-item" id="cm-modify-obj-type">
							<div class="menu-item-icon"></div>
							<div class="menu-item-text">Sync object type</div>
						</div>
						<div class="menu-item" id="cm-modify-obj-size">
							<div class="menu-item-icon"></div>
							<div class="menu-item-text">Sync object size</div>
						</div>

						<div class="menu-item menu-seperator"></div>
						<div class="menu-item" id="cm-edit-multiple-instances">
							<div class="menu-item-icon"></div>
							<div class="menu-item-text">Edit multiple instances</div>
						</div>

						<div class="menu-item" id="cm-show-trajectory">
							<div class="menu-item-icon"></div>
							<div class="menu-item-text">Show Trajectory</div>
						</div>

						<div class="menu-item menu-seperator"></div>
						<div class="menu-item" id="cm-select-as-ref">
							<div class="menu-item-icon"></div>
							<div class="menu-item-text">Copy/Select as Ref</div>
						</div>
						
						<div class="menu-item" id="cm-follow-ref">
							<div class="menu-item-icon"></div>
							<div class="menu-item-text">Follows Ref</div>
						</div>

						<div class="menu-item" id="cm-sync-followers">
							<div class="menu-item-icon"></div>
							<div class="menu-item-text">Sync followers</div>
						</div>
						

						<div class="menu-item menu-seperator"></div>
					</div>

					<div id="box-editor-context-menu">
						
						
						<div class="menu-item" id="cm-delete-previous">
							<div class="menu-item-icon">							
							</div>
							<div class="menu-item-text">Delete all previous</div>
						</div>

						<div class="menu-item" id="cm-delete">
							<div class="menu-item-icon">							
							</div>
							<div class="menu-item-text">Delete</div>
						</div>

						<div class="menu-item" id="cm-delete-next">
							<div class="menu-item-icon">							
							</div>
							<div class="menu-item-text">Delete all next</div>
						</div>

						<div class="menu-item menu-seperator"></div>

						<div class="menu-item" id="cm-interpolate-previous">
							<div class="menu-item-icon">							
							</div>
							<div class="menu-item-text">Interpolate all previous</div>
						</div>

						<div class="menu-item" id="cm-interpolate">
							<div class="menu-item-icon">							
							</div>
							<div class="menu-item-text">Interpolate</div>
						</div>

						<div class="menu-item" id="cm-interpolate-next">
							<div class="menu-item-icon">							
							</div>
							<div class="menu-item-text">Interpolate all next</div>
						</div>

						<div class="menu-item menu-seperator"></div>

						<div class="menu-item" id="cm-auto-annotate-previous">
							<div class="menu-item-icon">							
							</div>
							<div class="menu-item-text">Auto annotate all previous</div>
						</div>

						<div class="menu-item" id="cm-auto-annotate">
							<div class="menu-item-icon">							
							</div>
							<div class="menu-item-text">Auto annotate</div>
						</div>

						<div class="menu-item" id="cm-auto-annotate-next">
							<div class="menu-item-icon">							
							</div>
							<div class="menu-item-text">Auto annotate all next</div>
						</div>

						<div class="menu-item menu-seperator"></div>

						<div class="menu-item" id="cm-auto-annotate-wo-rotation-previous">
							<div class="menu-item-icon">							
							</div>
							<div class="menu-item-text">Auto annotate (no rotation) all previous</div>
						</div>

						<div class="menu-item" id="cm-auto-annotate-wo-rotation">
							<div class="menu-item-icon">							
							</div>
							<div class="menu-item-text">Auto  annotate (no rotation)</div>
						</div>

						<div class="menu-item" id="cm-auto-annotate-wo-rotation-next">
							<div class="menu-item-icon">							
							</div>
							<div class="menu-item-text">Auto  annotate (no rotation) all next</div>
						</div>

						<div class="menu-item menu-seperator"></div>

						

						<div class="menu-item" id="cm-finalize">
							<div class="menu-item-icon">							
							</div>
							<div class="menu-item-text">Finalize this object</div>
						</div>

						<div class="menu-item" id="cm-reload">
							<div class="menu-item-icon">							
							</div>
							<div class="menu-item-text">Reload this frame</div>
						</div>

						<div class="menu-item" id="cm-finalize">
							<div class="menu-item-icon">							
							</div>
							<div class="menu-item-text">Finalize this object</div>
						</div>

						<div class="menu-item menu-seperator"></div>
						<div class="menu-item" id="cm-goto-this-frame">
							<div class="menu-item-icon">							
							</div>
							<div class="menu-item-text">Go to this frame</div>
						</div>


					</div>
					<div id="box-editor-manager-context-menu">
							<div class="menu-item" id="cm-increase-box-editor">
								<div class="menu-item-icon">							
								</div>
								<div class="menu-item-text">More object instance</div>
							</div>

							<div class="menu-item" id="cm-decrease-box-editor">
								<div class="menu-item-icon">							
								</div>
								<div class="menu-item-text">less object instance</div>
							</div>

					</div>
					

				</div>

				<div id="config-wrapper">
					<div id="config-menu" class="non-selectable">
						<div class="menu-nonclickable-item" id="cfg-point-size">
							<span>Point size</span>
							<div class='cfg-widget-group'>
								<div id='cfg-increase-size' class='menu-button'>+</div>
								<div id='cfg-decrease-size' class='menu-button'>-</div>
							</div>
						</div>
						<div class="menu-nonclickable-item" id="cfg-point-brightness">
							<span>Point brightness</span>
							<div class='cfg-widget-group'>
								<div id='cfg-increase-brightness' class='menu-button'>+</div>
								<div id='cfg-decrease-brightness' class='menu-button'>-</div>
							</div>
						</div>

						<div class="menu-nonclickable-item" id="cfg-hide-box">
							<span>Hide box</span>
							<div class="cfg-widget-group">
								<input type="checkbox" id="cfg-hide-box-checkbox" class="cfg-widget">
							</div>
						</div>

						<div class="menu-nonclickable-item" id="cfg-theme">
							<span>Theme</span>
							<div class="cfg-widget-group">
								<select type="checkbox" id="cfg-theme-select" class="cfg-widget">
									<option value="dark" selected>dark</option>
									<option value="light" selected>light</option>
								</select>
							</div>
						</div>
						
						<div class="menu-nonclickable-item" id="cfg-color-object">
							<span>Color objects</span>
							<div class="cfg-widget-group">
								<select id="cfg-color-object-scheme"　 class="cfg-widget">
									<option value="category">by category</option>
									<option value="id">by ID</option>
									<option value="no">don't color</option>
								</select>

							</div>
						</div>

						<div class="menu-nonclickable-item" id="cfg-menu-batch-mode-inst-number">
							<span>Batch mode max box number</span>
							<div class="cfg-widget-group">								
								<select title="instance number" id="cfg-batch-mode-inst-number"　 class="cfg-widget">
									<option value = 10>10</option>
									<option value = 20 selected>20</option>
									<option value = 30>30</option>
									<option value = 40>40</option>
								</select>

							</div>
						</div>

						<div class="menu-item menu-seperator"></div>

						<div class="menu-item" id="cfg-data">
							<span>Show data</span>
							<div class="menu-item-arrow menu-item-icon">
								<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-menu-icon"><g>
									<path d="M12 8 L 18 12 L 12 16Z"></path>
								</g></svg>
							</div>

							<div id="cfg-data-submenu">
								<div class="menu-nonclickable-item" id="cfg-data-aux-lidar">
									<div class="menu-item-text">Auxiliary LiDAR</div>
									<div class="cfg-widget-group">
										<input type="checkbox" id="cfg-data-aux-lidar-checkbox" class="cfg-widget">
									</div>
								</div>

								<div class="menu-nonclickable-item" id="cfg-data-radar">
									<div class="menu-item-text">Radar</div>
									<div class="cfg-widget-group">
										<input type="checkbox" id="cfg-data-radar-checkbox" class="cfg-widget">
									</div>
								</div>

								<div class="menu-nonclickable-item" id="cfg-data-filter-points">
									<div class="menu-item-text">Filter points</div>
									<div class="cfg-widget-group">
										<input type="checkbox" id="cfg-data-filter-points" class="cfg-widget">
										<span> z-threshold</span>
										<input id="cfg-data-filter-points-z" class="cfg-widget">
									</div>
								</div>

							</div>
						</div>


						<div class="menu-item" id="cfg-experimental">
							<span>Experimental</span>
							<div class="menu-item-arrow menu-item-icon">
								<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-menu-icon"><g>
									<path d="M12 8 L 18 12 L 12 16Z"></path>
								</g></svg>
							</div>

							<div id="cfg-experimental-submenu">
								<div class="menu-nonclickable-item" id="cfg-calib-camera-LiDAR">
									<div class="menu-item-text">Camera-LiDAR calibration</div>
									<div class='cfg-widget-group'>
										<div id='cfg-start-calib' class='menu-button'>start</div>
										<div id='cfg-show-calib'  class='menu-button'>result</div>
										<div id='cfg-stop-calib'  class='menu-button'>stop</div>
										<!-- <div id='cfg-reset-calib' class='menu-button'>reset</div> -->
									</div>
								</div>								
							</div>
						</div>

						<div class="menu-item menu-seperator"></div>
						<div class="menu-item" id="cfg-take-screenshot">
							<span>Take screenshot</span>
						</div>
						
						<div class="menu-item" id="cfg-help">
							<a href="https://github.com/naurril/SUSTechPOINTS/blob/dev-auto-annotate/README_cn.md" target="_blank">Help</a>
						</div>
					</div>					
			</div>	

				<!-- div id="projective-view-context-menu">
					<div class="menu-item menu-seperator"></div>
					<div class="menu-item" id="cm-delete">
						<div class="menu-item-icon"></div>
						<div class="menu-item-text">Delete</div>
					</div>

					<div class="menu-item menu-seperator"></div>				
				</div -->
				<div id="object-track-wrapper" tabindex="-1">
					<div id="view" class="non-selectable">
						<div id="header">
							<span id="title">
								Trajectory								
							</span>
							
							<div id="buttons">
								<div id="btn-restore" class="ui-button"  title="restore">
									<!-- <span class="ui-icon ui-icon-trash"></span> -->
									<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-button"><g>
										<rect x = 6 y = 6 width=12 height=12></rect>
									</g></svg>
								</div>
								<div id="btn-maximize" class="ui-button"  title="maximize">
									<!-- <span class="ui-icon ui-icon-trash"></span> -->
									<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-button"><g>
										<rect x = 4 y = 4 width=16 height=16></rect>
									</g></svg>
								</div>
								<div id="btn-exit" class="ui-button"  title="exit">
									<!-- <span class="ui-icon ui-icon-trash"></span> -->
									<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-button"><g>
										<path d="M4 4 L 20 20 M 20 4 L 4 20"></path>
									</g></svg>
								</div>
							</div>
						</div>
						
						<svg id = "object-track-svg" viewbox="0 0 1000 1000" preserveAspectRatio="xMinYMax meet">
							<g id="svg-arrows">								
							</g>
						</svg>
					</div>
				</div>

				<div id="info-wrapper" tabindex='-1'>
					<div id="view">
						<div id="header">
							<span id="title">Info</span>
							<div id="buttons">
								<div id="btn-restore" class="ui-button"  title="restore">
									<!-- <span class="ui-icon ui-icon-trash"></span> -->
									<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-button"><g>
										<rect x = 6 y = 6 width=12 height=12></rect>
									</g></svg>
								</div>
								<div id="btn-maximize" class="ui-button"  title="maximize">
									<!-- <span class="ui-icon ui-icon-trash"></span> -->
									<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-button"><g>
										<rect x = 4 y = 4 width=16 height=16></rect>
									</g></svg>
								</div>
								<div id="btn-exit" class="ui-button"  title="exit">
									<!-- <span class="ui-icon ui-icon-trash"></span> -->
									<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-button"><g>
										<path d="M4 4 L 20 20 M 20 4 L 4 20"></path>
									</g></svg>
								</div>
							</div>
						</div>
						<div id="info-content"></div>
					</div>
				</div>

				<div id="crop-scene-wrapper" tabindex='-1'>
					<div id="view">
						<div id="header">
							<span id="title">Crop scene</span>
							<div id="buttons">
								<div id="btn-restore" class="ui-button"  title="restore">
									<!-- <span class="ui-icon ui-icon-trash"></span> -->
									<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-button"><g>
										<rect x = 6 y = 6 width=12 height=12></rect>
									</g></svg>
								</div>
								<div id="btn-maximize" class="ui-button"  title="maximize">
									<!-- <span class="ui-icon ui-icon-trash"></span> -->
									<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-button"><g>
										<rect x = 4 y = 4 width=16 height=16></rect>
									</g></svg>
								</div>
								<div id="btn-exit" class="ui-button"  title="exit">
									<!-- <span class="ui-icon ui-icon-trash"></span> -->
									<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-button"><g>
										<path d="M4 4 L 20 20 M 20 4 L 4 20"></path>
									</g></svg>
								</div>
							</div>
						</div>
						<div id="content">
							<div>
								<!-- <div><span>scene-id:</span><input id="scene-id" /></div> -->
								<div><span>desc:</span><input id="scene-desc" /></div>
								<div><span>start time:</span><input id="scene-start-time" /></div>
								<div><span>seconds:</span><input id="scene-seconds" /></div>

								<div>
									<button id="btn-generate">generate</button>									
								</div>

								<div id="log">

								</div>
							</div>
						</div>
					</div>
				</div>

		</template>
		<template id="box-editor-ui-template"><div id="sub-views">
				<div class="box-info" id="box-info"></div>
				<div class="view-manipulator"  id="z-view-manipulator"  tabindex="-1">
					<svg class="subview-svg" id = "view-svg">
						<circle cx="50%" cy="50%" r="5" class="origin-point-indicator" id="origin-point-indicator"></circle>
						<rect x="70" y="50" width="20" height="140" fill="#00000000" class="line-handle ew-handle" id="line-left-handle"/>
						<line x1="80" y1="40" x2="80" y2="200" class = "svg-line"  id="line-left" />

						<rect x="90" y="30" width="40" height="20" fill="#00000000" class="line-handle ns-handle" id="line-top-handle"/>
						<line x1="80" y1="40" x2="140" y2="40" class = "svg-line" id="line-top" />

						<rect x="130" y="50" width="20" height="140" fill="#00000000" class="line-handle ew-handle" id="line-right-handle"/>
						<line x1="140" y1="40" x2="140" y2="200" class = "svg-line" id="line-right" />

						<rect x="90" y="190" width="40" height="20" fill="#00000000" class="line-handle ns-handle" id="line-bottom-handle"/>
						<line x1="80" y1="200" x2="140" y2="200" class = "svg-line" id="line-bottom" />

						<rect x="110" y="120" width="20" height="70", fill="#00000000" class="line-handle  ew-handle" id="line-direction-handle"/>
						<line x1="110" y1="120" x2="110" y2="40" class = "svg-line" id="line-direction" />

						<!-- corners -->
						<rect x="60" y="40" width="20" height="20", fill="#00000000" class="line-handle  nw-handle" id="top-left-handle"/>
						<rect x="110" y="120" width="20" height="20", fill="#00000000" class="line-handle  ne-handle" id="top-right-handle"/>
						<rect x="110" y="120" width="20" height="20", fill="#00000000" class="line-handle  sw-handle" id="bottom-left-handle"/>
						<rect x="110" y="120" width="20" height="20", fill="#00000000" class="line-handle  se-handle" id="bottom-right-handle"/>

						<rect x="100" y="110" width="20" height="20", fill="#00000000" class="line-handle grab-handle" id="move-handle"/>
					</svg>
					<div class="v-buttons-wrapper" id="v-buttons">
						<div id="v-auto-translate-wo-scaling" class="ui-button"  title="auto translate w/o scaling">
							<!-- <span class="ui-icon ui-icon-arrow-4"></span> -->
							<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-button"><g>
								<!-- <polyline points="3 5 15 3 17 13 5 15 3 5" stroke-dasharray="1" /> -->
								<!-- <polyline points="8 10 20 8 22 18 10 20 8 10" /> -->
								<rect x="8" y="8" width="12" height="12" stroke-dasharray="1"/>
   								<rect x="4" y="4" width="12" height="12"/>
							</g></svg>
						</div>
						<div id="v-auto-rotate-wo-scaling" class="ui-button"  title="auto rotate w/o scaling">
							<!-- <span class="ui-icon ui-icon-arrow-1-n"></span> -->
							<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-button"><g>
								<rect x="8" y="10" width="12" height="10"/>
   								<polyline points="3 5 15 3 17 13 5 15 3 5" stroke-dasharray="1" />
							</g></svg>
						</div>

						<div id="v-auto-translate" class="ui-button"  title="auto translate">
							<!-- <span class="ui-icon ui-icon-arrow-4"></span> -->
							<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-button"><g>
								<!-- <polyline points="3 5 15 3 17 13 5 15 3 5" stroke-dasharray="1" /> -->
								<!-- <polyline points="8 10 20 8 22 18 10 20 8 10" /> -->
								<rect x="8" y="10" width="10" height="12" stroke-dasharray="1"/>
   								<rect x="4" y="4" width="8" height="10"/>
							</g></svg>
						</div>


						<div id="v-auto-rotate" class="ui-button"  title="auto rotate">
							<!-- <span class="ui-icon ui-icon-arrow-2-n-s"></span> -->
							<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-button"><g>
								<rect x="6" y="6" width="14" height="14"/>
   								<polyline points="3 5 15 3 17 13 5 15 3 5" stroke-dasharray="1" />
							</g></svg>
						</div>
						<div id="v-reset-rotate" class="ui-button"  title="reset rotation">
							<!-- <span class="ui-icon ui-icon-refresh"></span> -->
							<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-button"><g>
								<circle  cx=12 cy=12 r=8 />
								<circle  cx=12 cy=12 r=1 />
							</g></svg>
						</div>
					</div>
				</div>
				<div class="view-manipulator" id="y-view-manipulator"  tabindex="-1">
					<svg class="subview-svg" id="view-svg">
						<rect x="70" y="50" width="20" height="140" fill="#00000000" class="line-handle ew-handle" id="line-left-handle"/>
						<line x1="80" y1="40" x2="80" y2="200" class = "svg-line"  id="line-left" />

						<rect x="90" y="30" width="40" height="20" fill="#00000000" class="line-handle ns-handle" id="line-top-handle"/>
						<line x1="80" y1="40" x2="140" y2="40" class = "svg-line" id="line-top" />

						<rect x="130" y="50" width="20" height="140" fill="#00000000" class="line-handle ew-handle" id="line-right-handle"/>
						<line x1="140" y1="40" x2="140" y2="200" class = "svg-line" id="line-right" />

						<rect x="90" y="190" width="40" height="20" fill="#00000000" class="line-handle ns-handle" id="line-bottom-handle"/>
						<line x1="80" y1="200" x2="140" y2="200" class = "svg-line" id="line-bottom" />

						<rect x="110" y="120" width="20" height="70", fill="#00000000" class="line-handle  ew-handle" id="line-direction-handle"/>
						<line x1="110" y1="120" x2="110" y2="40" class = "svg-line" id="line-direction" />

						<!-- corners -->
						<rect x="60" y="40" width="20" height="20", fill="#00000000" class="line-handle  nw-handle"   id="top-left-handle"/>
						<rect x="110" y="120" width="20" height="20", fill="#00000000" class="line-handle  ne-handle" id="top-right-handle"/>
						<rect x="110" y="120" width="20" height="20", fill="#00000000" class="line-handle  sw-handle" id="bottom-left-handle"/>
						<rect x="110" y="120" width="20" height="20", fill="#00000000" class="line-handle  se-handle" id="bottom-right-handle"/>

						<rect x="100" y="110" width="20" height="20", fill="#00000000" class="line-handle  grab-handle" id="move-handle"/>

					</svg>
					<div class="v-buttons-wrapper" id="v-buttons">
						<div id="v-auto-rotate" class="ui-button"  title="auto-rotate">
							<!-- <span class="ui-icon ui-icon-key"></span> -->
							<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-button"><g>
								<rect x="6" y="6" width="14" height="14"/>
   								<polyline points="3 5 15 3 17 13 5 15 3 5" stroke-dasharray="1" />
							</g></svg>
						</div>
						<div id="v-reset-rotate" class="ui-button"  title="reset-rotation">
							<!-- <span class="ui-icon ui-icon-refresh"></span> -->
							<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-button"><g>
								<circle  cx=12 cy=12 r=8 />
								<circle  cx=12 cy=12 r=1 />
							</g></svg>
						</div>			
					</div>
				</div>
				<div class="view-manipulator" id="x-view-manipulator" tabindex="-1">
					<svg class="subview-svg" id="view-svg">
						<rect x="70" y="50" width="20" height="140" fill="#00000000" class="line-handle ew-handle" id="line-left-handle"/>
						<line x1="80" y1="40" x2="80" y2="200" class = "svg-line"  id="line-left" />

						<rect x="90" y="30" width="40" height="20" fill="#00000000" class="line-handle ns-handle" id="line-top-handle"/>
						<line x1="80" y1="40" x2="140" y2="40" class = "svg-line" id="line-top" />

						<rect x="130" y="50" width="20" height="140" fill="#00000000" class="line-handle ew-handle" id="line-right-handle"/>
						<line x1="140" y1="40" x2="140" y2="200" class = "svg-line" id="line-right" />

						<rect x="90" y="190" width="40" height="20" fill="#00000000" class="line-handle ns-handle" id="line-bottom-handle"/>
						<line x1="80" y1="200" x2="140" y2="200" class = "svg-line" id="line-bottom" />

						<rect x="110" y="120" width="20" height="70", fill="#00000000" class="line-handle  ew-handle" id="line-direction-handle"/>
						<line x1="110" y1="120" x2="110" y2="40" class = "svg-line" id="line-direction" />

						<!-- corners -->				
						<rect x="60" y="40" width="20" height="20", fill="#00000000" class="line-handle  nw-handle"   id="top-left-handle"/>
						<rect x="110" y="120" width="20" height="20", fill="#00000000" class="line-handle  ne-handle" id="top-right-handle"/>
						<rect x="110" y="120" width="20" height="20", fill="#00000000" class="line-handle  sw-handle" id="bottom-left-handle"/>
						<rect x="110" y="120" width="20" height="20", fill="#00000000" class="line-handle  se-handle" id="bottom-right-handle"/>

						<rect x="100" y="110" width="20" height="20", fill="#00000000" class="line-handle  grab-handle" id="move-handle"/>

					</svg>
					<div class="v-buttons-wrapper" id="v-buttons">
						<div id="v-auto-rotate" class="ui-button"  title="auto-rotate">
							<!-- <span class="ui-icon ui-icon-key"></span> -->
							<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-button"><g>
								<rect x="6" y="6" width="14" height="14"/>
								<polyline points="3 5 15 3 17 13 5 15 3 5" stroke-dasharray="1" />
							</g></svg>
						</div>
						<div id="v-reset-rotate" class="ui-button"  title="reset-rotation">
							<!-- <span class="ui-icon ui-icon-refresh"></span> -->
							<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-button"><g>
								<circle  cx=12 cy=12 r=8 />
								<circle  cx=12 cy=12 r=1 />
							</g></svg>
						</div>
					</div>
				</div>
				<canvas id="focuscanvas" class="non-selectable" width="320" height="240">cavas</canvas>
		</div></template>
		<template id="batch-editor-tools-template">
			<div id="batch-editor-tools-wrapper" class="non-selectable">
				<div id="batch-editor-tools">
					<!-- <select title="category"  id="object-category-selector"></select>
					<input title="tracking id" list="obj-ids-of-scene" id="object-track-id-editor" type="text" size="5"></input> -->

					

					<div class="menu-button" id="trajectory">Trajectory</div>
					<div class="menu-button" id="auto-annotate">Auto</div>
					<div class="menu-button" id="auto-annotate-translate-only">Auto (no rotation) </div>
					<div class="menu-button" id="interpolate">Interpolate</div>
					<div class="menu-button" id="reload">Reload</div>
					<div class="menu-button" id="finalize">Finalize</div>
					<div class="menu-button" id="save">Save</div>
					<div class="menu-button" id="prev">Previous</div>
					<div class="menu-button" id="next">Next</div>
					<div class="menu-button" id="exit">Exit</div>
					<div class="ui-button" id="config">
						<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="svg-button">
							<g>
								<circle cx = 12 cy=7 r=1 />
								<circle cx = 12 cy=12 r=1 />
								<circle cx = 12 cy=17 r=1 />							
							</g>
						</svg>
					</div>
				</div>
			</div>
		</template>
		<datalist id="obj-ids-of-scene"></datalist>
		<div id="output-window">
			<div id="handle">
				<div id="title">Outputs</div>
				<div id="clear">Clear</div>
			</div>
			<div id="textarea"></div>
		</div>
		
		<script src="/static/js/lib/ml/tf.min.js"></script>
		<script type="module"  src="/static/js/main.js"></script>

		<div class="hotkeys">
			<div class="hotkeys__block">
				<kbd>ctrl</kbd>+<kbd>z</kbd> - Undo
			</div>
			<div class="hotkeys__block">
				<kbd>ctrl</kbd>+<kbd>shift</kbd>+<kbd>z</kbd> - Redo
			</div>
			<div class="hotkeys__hint">Hotkeys</div>
		</div>
	</body>
</html>